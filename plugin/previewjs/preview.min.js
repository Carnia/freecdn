function showZoomImg(domName,model){let len=0;let domImg;let arrPic=[];let arrName=[];let num=0;let numNow=1;let leftPoint;let rightPoint;showModel(model);function showModel(model){if(model==="img"){$("body").on("click",domName,function(){domImg=$(this).parents(".zoomImgBox").find(domName);len=domImg.length;arrPic=[];arrName=[];for(var i=0;i<len;i++){arrPic[i]=domImg.eq(i).attr("src");if(domImg.eq(i).attr("data-caption")){arrName[i]=domImg.eq(i).attr("data-caption")}else{arrName[i]="图片"+(i+1)}}num=domImg.index(this);numNow=num+1;addMaskLater()})}else if(model==="text"){$("body").on("click",domName,function(){domImg=$(this).children(".zoomImg-hide-box").find("img");len=domImg.length;if(len<1){layui.use("layer",function(){var layer=layui.layer;layer.msg("暂未上传资料图片")});return}num=0;numNow=1;arrPic=[];arrName=[];for(var i=0;i<len;i++){arrPic[i]=domImg.eq(i).attr("src");if(domImg.eq(i).attr("data-caption")){arrName[i]=domImg.eq(i).attr("data-caption")}else{arrName[i]="图片"+(i+1)}}addMaskLater()})}}function addMaskLater(){var maskBg='<div class="mask-layer">'+'<div class="mask-layer-black"></div>'+'<div class="mask-layer-container">'+'<div class="mask-layer-imgbox"></div>'+'<div class="mask-layer-close"></div>'+'<div class="img-pre"></div>'+'<div class="img-next"></div>'+"</ul>"+"</div>"+"</div>";$("body").append(maskBg);if(len>1){showSmall()}else{$(".img-pre").css("display","none");$(".img-next").css("display","none")}showImg();showCtrl()}function showImg(){$(".mask-layer-imgbox").empty();var imgCont='<div class="mask-layer-imgName">'+arrName[num]+"</div>"+'<div class="layer-img-box"><img src="'+arrPic[num]+'" alt=""></div>';$(".mask-layer-imgbox").append(imgCont)}function showCtrl(){$(".img-pre").on("click",function(){num--;if(num===-1){num=len-1}showImg();showSmallThis()});$(".img-next").on("click",function(){num++;if(num===len){num=0;boxReset()}showImg();showSmallThis()});$(".mask-layer-close").click(function(){$(".mask-layer").remove()});if(arrPic.length>1){showSmallThis()}function showSmallThis(){$(".mask-small-img").removeClass("onthis");$($(".mask-small-img")[num]).addClass("onthis");allowShow()}$(".mask-small-img").on("click",function(){num=$(".mask-small-img").index(this);showImg();showSmallThis()});$(".box-go-left").on("click",function(){boxGoRight()});$(".box-go-right").on("click",function(){boxGoLeft()});function boxGoLeft(intTime){intTime?intTime:intTime=1;if(leftPoint>0){$(".small-img-box").animate({left:"-="+630*intTime},500);leftPoint=leftPoint-intTime;rightPoint=rightPoint+intTime}}function boxGoRight(){if(rightPoint>0){$(".small-img-box").animate({left:"+=630"},500);leftPoint++;rightPoint--}}function allowShow(){var boxLeft=$(".small-content").offset().left;var thisLeft=$(".mask-small-img.onthis").offset().left;var intTime=Math.floor((thisLeft-boxLeft)/630);if(thisLeft-boxLeft>=630){boxGoLeft(intTime)}else if(thisLeft<boxLeft){boxGoRight()}else{}}}function showSmall(){leftPoint=Math.ceil(arrPic.length/6)-1;rightPoint=0;$(".mask-layer-imgbox").addClass("has-small");var sDom="<div class='small-content'><div class='small-img-box'></div></div>";$(".mask-layer-container").append(sDom);for(var i=0;i<arrPic.length;i++){$(".small-img-box").append('<img class="mask-small-img" src='+arrPic[i]+">")}if(arrPic.length>6){$(".small-img-box").width(Math.ceil(arrPic.length/6)*630);$(".small-content").append('<span class="box-go-left"></span><span class="box-go-right"></span>')}}}